(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function s(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(t){if(t.ep)return;t.ep=!0;const o=s(t);fetch(t.href,o)}})();const l=async V=>{try{const e=await fetch(V);if(!e.ok)throw new Error("Network response was not ok");return await e.json()}catch(e){return console.error("Failed to fetch:",e),[]}},d=V=>{const e=localStorage.getItem(V);return e?JSON.parse(e):null},m=(V,e)=>{localStorage.setItem(V,JSON.stringify(e))},u=async()=>{const e=new URLSearchParams(window.location.search).get("url");return(e?await l(e):d("timers"))||[]},a=V=>`${Math.floor(V/60).toString().padStart(2,"0")}:${(V%60).toString().padStart(2,"0")}`,A=V=>new Promise(e=>setTimeout(e,V)),p=(...V)=>(...e)=>V.forEach(s=>s(...e)),i=new(window.AudioContext||window.webkitAudioContext),c=async(V=500,e=1)=>new Promise(s=>{const n=i.createOscillator(),t=i.createGain();n.connect(t),t.connect(i.destination),t.gain.value=e,n.frequency.value=1e3,n.type="sine",n.start(i.currentTime),n.stop(i.currentTime+V/1e3),n.onended=async()=>{await A(500),s()}}),g=V=>{const e=new SpeechSynthesisUtterance(V);window.speechSynthesis.speak(e)},f=()=>{if(!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)))return;const e=()=>{const s=new SpeechSynthesisUtterance("hello");s.volume=0,speechSynthesis.speak(s),document.removeEventListener("click",e)};document.addEventListener("click",e)},y=()=>{const V=new Audio;return V.src="data:audio/mp3;base64,SUQzBAAAAAABEVRYWFgAAAAtAAADY29tbWVudABCaWdTb3VuZEJhbmsuY29tIC8gTGFTb25vdGhlcXVlLm9yZwBURU5DAAAAHQAAA1N3aXRjaCBQbHVzIMKpIE5DSCBTb2Z0d2FyZQBUSVQyAAAABgAAAzIyMzUAVFNTRQAAAA8AAANMYXZmNTguMTYuMTAyAAAAAAAAAAAAAAD/80DEAAAAA0gAAAAATEFNRTMuMTAwVVVVVVVVVVVVVUxBTUUzLjEwMFVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQsRbAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVf/zQMSkAAADSAAAAABVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVVV",V.loop=!0,{start:()=>V.play(),stop:()=>V.pause()}},S=(V={})=>{const e={intervalId:null,isRunning:!1,lastTime:null,seconds:0,timerIdx:0,timers:V.timers||[],onEnd:V.onEnd||(()=>{}),onTick:V.onTick||(()=>{}),onStart:V.onStart||(()=>{}),onUpdate:V.onUpdate||(()=>{}),onComplete:V.onComplete||(()=>{})};e.onUpdate&&e.onUpdate(e);const s={getState:()=>({...e}),start:()=>{e.lastTime=Date.now(),e.intervalId=setInterval(()=>{const n=Date.now(),t=Math.floor((n-e.lastTime)/1e3);t<1||(e.seconds-=t,e.lastTime=n,e.onTick(e.seconds),e.seconds===0&&e.onEnd(),e.seconds<0?s.next():e.onUpdate(e))},100)},stop:()=>{clearInterval(e.intervalId),e.lastTime=null,e.onUpdate(e)},toggle:()=>{const n=e.timers[e.timerIdx];!e.isRunning&&!e.seconds&&e.onStart(n.name),e.isRunning=!e.isRunning,e.isRunning?(e.seconds=e.seconds||n.time,n.active=!0,s.start()):s.stop(),e.onUpdate(e)},next:()=>{const n=e.timers[e.timerIdx];if(n.active=!1,e.timerIdx+=1,e.timerIdx>=e.timers.length){s.reset();return}const t=e.timers[e.timerIdx];e.seconds=t.time,t.active=!0,e.onUpdate(e),e.onStart(t.name)},reset:()=>{e.isRunning=!1,e.seconds=0,e.timerIdx=0,e.lastTime=null,e.timers.forEach(n=>{n.active=!1}),clearInterval(e.intervalId),e.onUpdate(e),e.onComplete()}};return s},h=V=>{const e=document.getElementById("display"),s=document.getElementById("toggle"),n=document.getElementById("reset"),t=document.getElementById("list");s.disabled=n.disabled=V.timers.length===0,s.innerHTML=V.isRunning?"Stop":"Start",e.innerHTML=a(V.seconds),t.innerHTML=V.timers.map(o=>`<li class="item${o.active?" active":""}"><span class="text name">${o.name}</span><span class="text time">${a(o.time)}</span></li>`).join("")},w=async()=>{const V=document.getElementById("toggle"),e=document.getElementById("reset"),s=y(),n=await u(),t=S({timers:n,onEnd:c,onStart:g,onUpdate:h,onComplete:s.stop,onTick:r=>r<=3&&r>0&&c(100)}),o=()=>s==null?void 0:s[t.getState().isRunning?"start":"stop"]();V.addEventListener("click",p(t.toggle,o)),e.addEventListener("click",t.reset),f(),m("timers",n)};document.addEventListener("DOMContentLoaded",w);
