(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))o(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&o(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();const d=async t=>{try{const e=await fetch(t);if(!e.ok)throw new Error("Network response was not ok");return await e.json()}catch(e){return console.error("Failed to fetch:",e),[]}},m=t=>{const e=localStorage.getItem(t);return e?JSON.parse(e):null},u=(t,e)=>{localStorage.setItem(t,JSON.stringify(e))},p=async()=>{const e=new URLSearchParams(window.location.search).get("url");return(e?await d(e):m("timers"))||[]},l=t=>`${Math.floor(t/60).toString().padStart(2,"0")}:${(t%60).toString().padStart(2,"0")}`,g=t=>new Promise(e=>setTimeout(e,t)),f=(...t)=>(...e)=>t.forEach(s=>s(...e)),c=new(window.AudioContext||window.webkitAudioContext),a=async(t=500,e=1)=>new Promise(s=>{const o=c.createOscillator(),n=c.createGain();o.connect(n),n.connect(c.destination),n.gain.value=e,o.frequency.value=1e3,o.type="sine",o.start(c.currentTime),o.stop(c.currentTime+t/1e3),o.onended=async()=>{await g(500),s()}}),y=t=>{const e=new SpeechSynthesisUtterance(t);window.speechSynthesis.speak(e)},S=()=>{if(!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)))return;const e=()=>{const s=new SpeechSynthesisUtterance("hello");s.volume=0,speechSynthesis.speak(s),document.removeEventListener("click",e)};document.addEventListener("click",e)},h=()=>{const t=new NoSleep;return{start:()=>t.enable(),stop:()=>t.disable()}},v=(t={})=>{const e={intervalId:null,isRunning:!1,lastTime:null,seconds:0,timerIdx:0,timers:t.timers||[],onRun:t.onRun||(()=>{}),onEnd:t.onEnd||(()=>{}),onTick:t.onTick||(()=>{}),onStart:t.onStart||(()=>{}),onUpdate:t.onUpdate||(()=>{}),onComplete:t.onComplete||(()=>{})};e.onUpdate&&e.onUpdate(e);const s={getState:()=>({...e}),start:()=>{e.lastTime=Date.now(),e.intervalId=setInterval(()=>{const o=Date.now(),n=Math.floor((o-e.lastTime)/1e3);n<1||(e.seconds-=n,e.lastTime=o,e.onTick(e.seconds),e.seconds===0&&e.onEnd(),e.seconds<0?s.next():e.onUpdate(e))},100)},stop:()=>{clearInterval(e.intervalId),e.lastTime=null,e.onUpdate(e)},toggle:()=>{const o=e.timers[e.timerIdx];!e.isRunning&&!e.seconds&&(e.onRun(),e.onStart(o.name)),e.isRunning=!e.isRunning,e.isRunning?(e.seconds=e.seconds||o.time,o.active=!0,s.start()):s.stop(),e.onUpdate(e)},next:()=>{const o=e.timers[e.timerIdx];if(o.active=!1,e.timerIdx+=1,e.timerIdx>=e.timers.length){s.reset();return}const n=e.timers[e.timerIdx];e.seconds=n.time,n.active=!0,e.onUpdate(e),e.onStart(n.name)},reset:()=>{e.isRunning=!1,e.seconds=0,e.timerIdx=0,e.lastTime=null,e.timers.forEach(o=>{o.active=!1}),clearInterval(e.intervalId),e.onUpdate(e),e.onComplete()}};return s},w=t=>{const e=document.getElementById("version"),s=document.getElementById("display"),o=document.getElementById("toggle"),n=document.getElementById("reset"),r=document.getElementById("list");o.disabled=n.disabled=t.timers.length===0,o.innerHTML=t.isRunning?"Stop":"Start",s.innerHTML=l(t.seconds),e.textContent="1.12.1",r.innerHTML=t.timers.map(i=>`<li class="item${i.active?" active":""}"><span class="text name">${i.name}</span><span class="text time">${l(i.time)}</span></li>`).join("")},I=async()=>{const t=document.getElementById("toggle"),e=document.getElementById("reset"),s=h(),o=await p(),n=v({timers:o,onEnd:a,onStart:y,onUpdate:w,onRun:()=>a(0,0),onComplete:s.stop,onTick:i=>i<=3&&i>0&&a(100)}),r=()=>s==null?void 0:s[n.getState().isRunning?"start":"stop"]();t.addEventListener("click",f(n.toggle,r)),e.addEventListener("click",n.reset),S(),u("timers",o)};document.addEventListener("DOMContentLoaded",I);
