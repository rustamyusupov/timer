(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const c of n)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const c={};return n.integrity&&(c.integrity=n.integrity),n.referrerPolicy&&(c.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?c.credentials="include":n.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(n){if(n.ep)return;n.ep=!0;const c=i(n);fetch(n.href,c)}})();const g="00:00",w="Workout complete!",y=1e3,h=60,v={add:document.getElementById("add"),form:document.getElementById("form"),list:document.getElementById("list"),name:document.getElementById("name"),pause:document.getElementById("pause"),reset:document.getElementById("reset"),start:document.getElementById("start"),timer:document.getElementById("timer"),version:document.getElementById("version")},d={idle:"idle",add:"add",ready:"ready",countdown:"countdown",pause:"pause"},r={current:{index:null,name:null,time:null},intervalId:null,process:d.idle,timers:[]},E=t=>{const[e,i]=t.split(":").map(Number);return e*h+i},I=t=>{const e=String(Math.floor(t/h)).padStart(2,"0"),i=String(t%h).padStart(2,"0");return`${e}:${i}`},b=async t=>{try{const e=await fetch(t);if(!e.ok)throw new Error("Network response was not ok");return await e.json()}catch(e){return console.error("Failed to fetch:",e),[]}},x=async()=>{const e=new URLSearchParams(window.location.search).get("url");return e?await b(e):JSON.parse(localStorage.getItem("timers"))||[]},S=t=>new Promise(e=>setTimeout(e,t)),u=new(window.AudioContext||window.webkitAudioContext),p=async(t=500,e=1)=>new Promise(i=>{const s=u.createOscillator(),n=u.createGain();s.connect(n),n.connect(u.destination),n.gain.value=e,s.frequency.value=1e3,s.type="sine",s.start(u.currentTime),s.stop(u.currentTime+t/y),s.onended=async()=>{await S(500),i()}}),L=t=>{const e=new SpeechSynthesisUtterance(t);window.speechSynthesis.speak(e)},k=()=>{if(!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform)))return;const e=()=>{const i=new SpeechSynthesisUtterance("hello");i.volume=0,speechSynthesis.speak(i),document.removeEventListener("click",e)};document.addEventListener("click",e)},C=({version:t})=>t.textContent="v1.11.0",T=({timer:t},e)=>{const i=e.current.time?e.current.time:g,[s,n]=i.split(":");t.innerHTML=`${s}<span class="semicolon">:</span>${n}`},O=(t,e)=>(i,s)=>{const n=document.createElement("button"),c=document.createElement("span"),o=document.createElement("span"),l=document.createElement("li");n.classList.add("remove"),n.setAttribute("type","button"),n.textContent="âœ–",n.dataset.index=s,c.classList.add("text","name"),c.textContent=i.name,o.classList.add("text","time"),o.textContent=i.time,l.classList.add("item"),l.classList.toggle("active",e===s),l.appendChild(n),l.appendChild(c),l.appendChild(o),t.appendChild(l)},P=({list:t},e)=>{t.innerHTML="",e.timers.forEach(O(t,e.current.index))},N=({add:t,form:e,name:i,pause:s,reset:n,start:c},o)=>{switch(o.process){case d.idle:t.classList.remove("hidden"),e.classList.add("hidden"),s.classList.add("hidden"),n.classList.add("hidden"),c.classList.add("hidden");break;case d.add:t.classList.add("hidden"),e.classList.remove("hidden"),s.classList.add("hidden"),n.classList.add("hidden"),c.classList.add("hidden"),i.focus();break;case d.ready:t.classList.remove("hidden"),e.classList.add("hidden"),s.classList.add("hidden"),n.classList.add("hidden"),c.classList.remove("hidden"),e.reset();break;case d.countdown:t.classList.add("hidden"),e.classList.add("hidden"),n.classList.remove("hidden"),s.classList.remove("hidden"),c.classList.add("hidden");break;case d.pause:t.classList.add("hidden"),e.classList.add("hidden"),s.classList.add("hidden"),n.classList.remove("hidden"),c.classList.remove("hidden");break}},B=(t,e)=>{C(t),P(t,e),T(t,e),N(t,e)},m=new NoSleep,a=t=>{Object.assign(r,t),B(v,r),localStorage.setItem("timers",JSON.stringify(r.timers))},f=()=>{clearInterval(r.intervalId),a({intervalId:null,current:{index:null,name:null,time:null},process:d.ready}),m==null||m.disable()},A=t=>{const e=new FormData(t.target),i=Object.fromEntries(e.entries()),s=[...r.timers,i];a({process:d.ready,timers:s})},M=t=>{const e=!t.target.classList.contains("remove"),i=r.process===d.countdown;if(e||i)return;const s=[...r.timers],n=t.target.dataset.index;s.splice(n,1),a({process:s.length>0?d.ready:d.idle,timers:s})},$=()=>a({process:d.add}),j=()=>{clearInterval(r.intervalId),a({intervalId:null,process:d.pause})},q=()=>f(),F=async()=>{const t=r.current.index,e=t+1,i=r.timers.length-1===t,s=E(r.current.time)-1,n=I(s);if(a({current:{index:t,name:r.timers[t].name,time:n}}),s>0&&s<=3&&p(100),s===0){if(i){f(),L(w);return}await p(),L(r.timers[e].name),a({current:{index:e,...r.timers[e]}})}},R=async()=>{const t=r.current.time?r.current:{index:0,...r.timers[0]};m==null||m.enable(),await p(),L(t.name),r.intervalId=setInterval(F,y),a({current:t,process:d.countdown})},U=async()=>{const{form:t,list:e,add:i,pause:s,reset:n,start:c}=v,o=await x();t.addEventListener("submit",A),e.addEventListener("click",M),i.addEventListener("click",$),s.addEventListener("click",j),n.addEventListener("click",q),c.addEventListener("click",R),a({process:o.length>0?d.ready:d.idle,timers:o}),k()};document.addEventListener("DOMContentLoaded",U);
